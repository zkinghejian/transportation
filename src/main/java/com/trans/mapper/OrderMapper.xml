<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "H:\eclipseCode\transportation\mybatis-3-mapper.dtd">
<mapper namespace="com.trans.mapper.OrderMapper">

	<insert id="addOrder" parameterType="Order" >
		insert into trans_order (order_id,car_type,
	      <if test="car_num != null" >
	        car_num,
	      </if>
	    car_pro,order_time,phoneno) values 
	    (#{order_id},#{car_type},
	    <if test="car_num != null" >
	        #{car_num},
	    </if>
	    #{car_pro},#{order_time},#{phoneno})
	</insert>

    <select id="getOrdersByPhoneno" parameterType="string" resultType="Order" >
    	 select order_id,car_type,car_num,car_pro,order_time from
    	 trans_order where phoneno = #{value}
    </select>
    
    <select id="pageTest" parameterType="page" resultType="Order">
    	select * from trans_order where 1=1
       
    	<if test="params.phoneno != null">
		  <![CDATA[
		  		and phoneno = #{params.phoneno}
		  ]]>
  		</if>
  		<if test="params.status != null">
  			<![CDATA[
		  		and order_status = #{params.status}
		    ]]>
  		</if>
  		
    </select>
    
    <update id="quxiao" parameterType="string">
    	<![CDATA[
		  	update trans_order set order_status = 3 where order_id = #{value}
		]]>
    </update>
    
</mapper>